import numpy as np
import matplotlib.pyplot as plt

# Define the numerical value for empty spaces
empty_val = -1

newstringwhodis = np.loadtxt("roaddata.txt", dtype=str)

s = "\n".join(str(x) for x in newstringwhodis)

velocities3 = np.array([[empty_val if c == '.' else int(c) for c in line.strip()] for line in s.split('\n')])

datastr = """...........5......................................................3................................3
...4............5....................................................3..............................
........5............5..................................................3...........................
............4.............5.................................................4.......................
................4..............5.................................................5..................
.....................5.............4..................................................5.............
..........................5............4...................................................5........
..............................4............4...................................................4....
..................................4.............5..................................................4
....5..................................5.............5..............................................
........4..................................4..............5.........................................
.............5..................................5.............4.....................................
.................4...................................5.............5................................
.....................4....................................5.............5...........................
.........................4....................................4.............4.......................
..............................5...................................4..............5..................
..................................4...................................4...............5.............
.......................................5...................................5..............4.........
...........................................4....................................5..............5....
...............................................4....................................4..............4
....5..............................................4....................................4...........
.........5.............................................4.....................................5......
.............4.............................................4.....................................4..
.4...............4..............................................5...................................
......5...............5.............................................4...............................
..........4...............4..............................................5..........................
...............5..............4...............................................5.....................
...................4..............4...............................................4.................
.......................4...............5..............................................4.............
...........................4...............4...............................................5........
................................5..............4...............................................4....
.....................................5.............4...............................................4
...4.....................................4.............4............................................
.......4......................................5.............5.......................................
............5.....................................4.............4...................................
................4.....................................4..............5..............................
.....................5.....................................5.............4.........................."""

otherdatastr = """..........5..............4........4........5............1..1...2.1........3.......3.................
..............4...............5........5.......4.........1...2..1.1...........4......3..............
...................5..............4........4.......4.......2...20...2..............5.....4..........
.......................4..............4........4.......4......300......3................5....4......
............................5..............5.......4.......4..00.1.........4...............3......5.
..4.............................4...............5......4.....20.1.1.............5..............4....
5......5............................4...............4.......500.0...2...............4...............
....4.......5............................5..............4...00.10......3................4...........
.........5.......5...........................4............2.00.0.1........3..................5......
..............5.......5..........................4.........10.10..1..........3...................4..
.4................4.......4...........................5....0.10.1...2...........3...................
......5...............4.......4...........................40.00..1.....3............4...............
..........4................5.......5......................0.10.1...2.......4............4...........
..............4.................5.......5.................0.00...2...2.........4............4.......
...................5.................5......4..............100.....2...2............5...........4...
.5......................5.................5......5.........000........3...3.............4...........
.....4......................4.................4.......5....000...........3....4.............4.......
..........5.....................4.................4......3.000...............4.....5.............5..
.4.............5.....................5.................5..1000....................5....4............
.....4.............4......................5..............20000.......................3......5.......
.........4.............4.......................5.........0000.1..........................4.......5..
..5...........5.............5.......................5....000.1..2.............................5.....
......4...........4.............4......................3.00.1..2..2...............................4.
..4.......4...........4..............5.................0.0.1.1...2...3..............................
.......5......4...........4..............4.............0..1.1.1.....3...3...........................
...........4.......5...........5.............4.........0..0.0..1......2....3........................
...............4.......4............5.............5....0...1.1...2......2.....3.....................
...................4........5...........4............3..1...1.1.....3.....2.......4.................
.......................4........4............5.........2.1...1.1........4....3........4.............
...........................4........4............4......1.1...1..2..........4....4.........5........
................................5.......4............4..0..1...1...2............4....4.........4....
5...................................4........5.........2.1..1....2....3.............4.....5.........
.....5...................................5........5....0...2..2....2.....3...............5....4.....
..........5...................................5......3.0....1...2.....3.....3................4....4.
...5...........5..................................4...10.....1....2......3.....3.................4..
.4......5...........5...............................2.00......1.....2.......3.....3.................
.....4......4............5..........................0.0.1.......2.....2........3......4.............
..........5.....4.............5.....................0.0..1.........3.....3........3........5........
..............4......5............4..................10...1............4.....4........4.........5...
4..................5......5...........4..............00.....2...............5.....5.......4.........
.....5..................5.....4............5.........0.1.......3................4.....4........5....
..........5.................4......5...........4......1..2.........4.................5.....5.......4
....5..........5................4......4............5..1...2............5.................5....4....
5........5..........5................5.....4.........1..1.....3..............5................4.....
.....5.......4...........5................5.....5......2..2......3...............4................4.
...5.....4........5...........5...............4......5...2...3......3.................5.............
.......4.....4.........5..........4................5....3..2....3.......4..................5........
............5.....5........4...........5..............3...2...3.....4........5.................4....
5................5....4.........5..........4............2....3...3......4.........5.................
.....5..............3.....4.........4..........4...........3...2....3........5........4.............
.........4..............4......5.........5..........5........2...2.....3..........5.......4........."""


# Convert the velocity data string to a 2D array
velocities = np.array([[empty_val if c == '.' else int(c) for c in line.strip()] for line in datastr.split('\n')])
velocities2 = np.array([[empty_val if c == '.' else int(c) for c in line.strip()] for line in otherdatastr.split('\n')])

# Create a figure and axes object
fig, ax = plt.subplots()

# Invert the y-axis to show time increasing downward
ax.invert_yaxis()

# Plot the velocity data as a space-time diagram
im1 = ax.imshow(velocities, cmap='Greys', origin='upper', vmin=-1, vmax=5, aspect='auto', interpolation="None") 

plt.colorbar(im1)
# Add labels and titles
ax.set_xlabel('Space (Road)')
ax.set_ylabel('Time')
# Turn off tick labels
ax.set_yticklabels([])
ax.set_xticklabels([])
ax.xaxis.set_ticks_position('none') # tick markers
ax.yaxis.set_ticks_position('none')
ax.set_title('Space-Time Diagram of Traffic Flow')

plt.savefig("RoadValues.png")

# Show the plot
plt.show()

fig, ax1 = plt.subplots()

ax1.invert_yaxis()

# Plot the velocity data as a space-time diagram
im2 = ax1.imshow(velocities2, cmap='Greys', origin='upper', vmin=-1, vmax=5, aspect='auto', interpolation="None") 

plt.colorbar(im2)
# Add labels and titles
ax1.set_xlabel('Space (Road)')
ax1.set_ylabel('Time')
# Turn off tick labels and markers
ax1.set_yticklabels([])
ax1.set_xticklabels([])
ax1.xaxis.set_ticks_position('none') 
ax1.yaxis.set_ticks_position('none')
ax1.set_title('Space-Time Diagram of Traffic Flow')

plt.savefig("RoadValues2.png")

# Show the plot
plt.show()

fig, ax2 = plt.subplots()

ax1.invert_yaxis()

# Plot the velocity data as a space-time diagram
im3 = ax2.imshow(velocities3[10000:11000,0:100], cmap='Greys', origin='upper', vmin=-1, vmax=5, aspect='auto', interpolation="None") 

plt.colorbar(im3)
# Add labels and titles
ax2.set_xlabel('Space (Road)')
ax2.set_ylabel('Time')
# Turn off tick labels and markers
ax2.set_yticklabels([])
ax2.set_xticklabels([])
ax2.xaxis.set_ticks_position('none') 
ax2.yaxis.set_ticks_position('none')
ax2.set_title('Space-Time Diagram of Traffic Flow')

plt.savefig("RoadValues3Rainpt8.png")

# Show the plot
plt.show()